openapi: 3.0.3
info:
  title: FenixCRM API
  version: 1.0.0
paths:
  /health:
    get:
      summary: Health check
      x-fr-traces:
      - NFR-031
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
  /auth/register:
    post:
      summary: Register
      x-fr-traces:
      - FR-060
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
  /auth/login:
    post:
      summary: Login
      x-fr-traces:
      - FR-060
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
  /api/v1/accounts:
    post:
      summary: Create accounts
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    get:
      summary: List accounts
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/accounts/{id}:
    parameters:
    - $ref: '#/components/parameters/ID'
    get:
      summary: Get accounts
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    put:
      summary: Update accounts
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    delete:
      summary: Delete accounts
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/contacts:
    post:
      summary: Create contacts
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    get:
      summary: List contacts
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/contacts/{id}:
    parameters:
    - $ref: '#/components/parameters/ID'
    get:
      summary: Get contacts
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    put:
      summary: Update contacts
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    delete:
      summary: Delete contacts
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/leads:
    post:
      summary: Create leads
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    get:
      summary: List leads
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/leads/{id}:
    parameters:
    - $ref: '#/components/parameters/ID'
    get:
      summary: Get leads
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    put:
      summary: Update leads
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    delete:
      summary: Delete leads
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/deals:
    post:
      summary: Create deals
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    get:
      summary: List deals
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/deals/{id}:
    parameters:
    - $ref: '#/components/parameters/ID'
    get:
      summary: Get deals
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    put:
      summary: Update deals
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    delete:
      summary: Delete deals
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/cases:
    post:
      summary: Create cases
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    get:
      summary: List cases
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/cases/{id}:
    parameters:
    - $ref: '#/components/parameters/ID'
    get:
      summary: Get cases
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    put:
      summary: Update cases
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    delete:
      summary: Delete cases
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/activities:
    post:
      summary: Create activities
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    get:
      summary: List activities
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/activities/{id}:
    parameters:
    - $ref: '#/components/parameters/ID'
    get:
      summary: Get activities
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    put:
      summary: Update activities
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    delete:
      summary: Delete activities
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/notes:
    post:
      summary: Create notes
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    get:
      summary: List notes
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/notes/{id}:
    parameters:
    - $ref: '#/components/parameters/ID'
    get:
      summary: Get notes
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    put:
      summary: Update notes
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    delete:
      summary: Delete notes
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/accounts/{account_id}/contacts:
    parameters:
    - $ref: '#/components/parameters/AccountID'
    get:
      summary: List contacts by account
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/pipelines:
    post:
      summary: Create pipeline
      x-fr-traces:
      - FR-002
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    get:
      summary: List pipelines
      x-fr-traces:
      - FR-002
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/pipelines/{id}:
    parameters:
    - $ref: '#/components/parameters/ID'
    get:
      summary: Get pipeline
      x-fr-traces:
      - FR-002
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    put:
      summary: Update pipeline
      x-fr-traces:
      - FR-002
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    delete:
      summary: Delete pipeline
      x-fr-traces:
      - FR-002
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/pipelines/{id}/stages:
    parameters:
    - $ref: '#/components/parameters/ID'
    post:
      summary: Create stage
      x-fr-traces:
      - FR-002
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    get:
      summary: List stages
      x-fr-traces:
      - FR-002
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/pipelines/stages/{stage_id}:
    parameters:
    - $ref: '#/components/parameters/StageID'
    put:
      summary: Update stage
      x-fr-traces:
      - FR-002
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    delete:
      summary: Delete stage
      x-fr-traces:
      - FR-002
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/attachments:
    post:
      summary: Create attachment
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    get:
      summary: List attachments
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/attachments/{id}:
    parameters:
    - $ref: '#/components/parameters/ID'
    get:
      summary: Get attachment
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    delete:
      summary: Delete attachment
      x-fr-traces:
      - FR-001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/timeline:
    get:
      summary: List timeline
      x-fr-traces:
      - FR-051
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/timeline/{entity_type}/{entity_id}:
    parameters:
    - $ref: '#/components/parameters/EntityType'
    - $ref: '#/components/parameters/EntityID'
    get:
      summary: List timeline by entity
      x-fr-traces:
      - FR-051
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/knowledge/ingest:
    post:
      summary: Ingest knowledge
      x-fr-traces:
      - FR-090
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/knowledge/search:
    post:
      summary: Search knowledge
      x-fr-traces:
      - FR-092
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/knowledge/evidence:
    post:
      summary: Build evidence
      x-fr-traces:
      - FR-092
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/knowledge/reindex:
    post:
      summary: Reindex knowledge
      x-fr-traces:
      - FR-091
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/approvals:
    get:
      summary: List approvals
      x-fr-traces:
      - FR-061
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/approvals/{id}:
    parameters:
    - $ref: '#/components/parameters/ID'
    put:
      summary: Decide approval
      x-fr-traces:
      - FR-061
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/admin/tools:
    get:
      summary: List tools
      x-fr-traces:
      - FR-202
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    post:
      summary: Create tool
      x-fr-traces:
      - FR-202
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/admin/prompts:
    get:
      summary: List prompt versions
      parameters:
      - name: agent_id
        in: query
        required: true
        schema:
          type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
    post:
      summary: Create prompt version
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/admin/prompts/{id}/promote:
    put:
      summary: Promote prompt version to active
      parameters:
      - $ref: '#/components/parameters/ID'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/admin/prompts/{id}/rollback:
    put:
      summary: Rollback to previous prompt version
      parameters:
      - $ref: '#/components/parameters/ID'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        '409':
          description: Conflict - no archived version to rollback to
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/copilot/chat:
    post:
      summary: Copilot chat
      x-fr-traces:
      - FR-200
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/copilot/suggest-actions:
    post:
      summary: Suggest copilot actions
      x-fr-traces:
      - FR-201
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
  /api/v1/copilot/summarize:
    post:
      summary: Summarize copilot entity context
      x-fr-traces:
      - FR-200
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnyResponse'
        default:
          description: Unexpected response
      security:
      - BearerAuth: []
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    AnyResponse:
      type: object
      additionalProperties: true
    Meta:
      type: object
    ErrorResponse:
      type: object
  parameters:
    Limit:
      name: limit
      in: query
      schema:
        type: integer
    Offset:
      name: offset
      in: query
      schema:
        type: integer
    ID:
      name: id
      in: path
      required: true
      schema:
        type: string
    StageID:
      name: stage_id
      in: path
      required: true
      schema:
        type: string
    EntityType:
      name: entity_type
      in: path
      required: true
      schema:
        type: string
    EntityID:
      name: entity_id
      in: path
      required: true
      schema:
        type: string
    AccountID:
      name: account_id
      in: path
      required: true
      schema:
        type: string
